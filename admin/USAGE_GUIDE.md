# AI图像编辑平台后台管理系统 - 使用指南

## 🚀 快速开始

### 方法一：使用uv环境（推荐）

1. **设置uv环境**
   ```bash
   # 双击运行（Windows）
   setup_uv_env.bat
   
   # 或手动执行
   uv venv I:/dev_works/python_venv/ai_image_processor
   uv pip install --python I:/dev_works/python_venv/ai_image_processor/Scripts/python.exe gradio pandas pillow matplotlib numpy
   ```

2. **启动后台管理**
   ```bash
   # 双击运行（Windows）
   start_uv.bat
   
   # 或手动执行
   python start_with_uv.py
   ```

### 方法二：使用传统pip环境

1. **安装依赖**
   ```bash
   cd admin
   pip install -r requirements.txt
   ```

2. **启动后台管理**
   ```bash
   python start_admin.py
   # 或
   python app.py
   ```

## 📋 功能使用说明

### 🔑 授权码管理

#### 创建单个授权码
1. 进入"授权码管理"标签页
2. 在左侧"创建授权码"区域填写：
   - **授权码**: 自定义授权码（建议16位）
   - **积分**: 初始积分数量
   - **过期日期**: 格式为 YYYY-MM-DD
3. 点击"创建授权码"按钮

#### 批量创建授权码
1. 在"批量创建授权码"区域填写：
   - **授权码前缀**: 如 "USER"
   - **数量**: 要创建的数量
   - **积分**: 每个授权码的初始积分
   - **过期日期**: 统一过期时间
2. 点击"批量创建"按钮
3. 系统会自动生成如 USER0001, USER0002... 的授权码

#### 编辑授权码
1. 在右侧授权码列表中点击要编辑的行
2. 左侧"编辑授权码"区域会自动填充信息
3. 修改需要的字段
4. 点击"更新授权码"或"删除授权码"

#### 积分调整
1. 在"积分调整"区域输入：
   - **授权码**: 要调整的授权码
   - **调整类型**: 选择"增加"或"减少"
   - **调整数量**: 积分变动数量
   - **调整原因**: 记录调整原因
2. 点击"调整积分"按钮

### 📊 生成记录管理

#### 查看生成记录
1. 进入"生成记录"标签页
2. 可以看到所有用户的图像生成历史
3. 包含授权码、模式、提示词、输出数量、生成时间等信息

#### 筛选记录
1. 使用顶部筛选器：
   - **日期筛选**: 格式为 YYYY-MM-DD
   - **授权码筛选**: 输入特定授权码
   - **模式筛选**: 输入模式类型
2. 点击"筛选"按钮

#### 导出数据
1. 设置筛选条件（可选）
2. 点击"导出数据"按钮
3. 系统会生成CSV文件供下载

### 📚 案例管理

#### 添加新案例
1. 进入"案例管理"标签页
2. 在右侧"案例编辑"区域填写：
   - **标题**: 案例名称
   - **描述**: 案例详细描述
   - **分类**: 案例分类（如：人物、风景等）
   - **标签**: 用逗号分隔的标签
   - **预览图片URL**: 案例预览图链接
   - **提示词**: 完整的AI提示词
3. 点击"创建案例"按钮

#### 编辑案例
1. 在左侧案例列表中点击要编辑的案例
2. 右侧会自动填充案例信息
3. 修改需要的字段
4. 点击"更新案例"按钮

#### 删除案例
1. 选择要删除的案例
2. 点击"删除案例"按钮
3. 确认删除操作

### 📈 数据统计

#### 用户活跃度
- 查看日活跃用户(DAU)、周活跃用户(WAU)、月活跃用户(MAU)
- 查看用户活跃度趋势图

#### 图像生成统计
- 查看总生成次数和今日生成次数
- 查看生成次数趋势和各模式使用分布

#### 积分消耗分析
- 查看总积分消耗和今日积分消耗
- 查看积分消耗趋势和各模式积分消耗分布

#### 热门案例排行
- 查看最受欢迎的案例
- 查看案例浏览量排行榜

### ⚙️ 系统设置

#### 数据库维护
- **备份数据库**: 创建数据库备份文件
- **恢复数据库**: 从备份文件恢复数据库
- **查看数据库信息**: 查看表结构和统计信息

#### 系统日志
- 查看系统运行日志
- 监控系统状态和错误信息

## 🔧 故障排除

### 常见问题

#### 1. 依赖包安装失败
```bash
# 使用uv环境
uv pip install --python I:/dev_works/python_venv/ai_image_processor/Scripts/python.exe gradio pandas pillow matplotlib numpy

# 使用pip环境
pip install -r requirements.txt
```

#### 2. 数据库连接失败
- 检查数据库文件是否存在
- 确保有读写权限
- 查看错误日志

#### 3. 端口被占用
- 修改config.py中的端口设置
- 或终止占用7860端口的进程

#### 4. 图表显示异常
- 确保matplotlib正确安装
- 检查数据是否存在

### 日志查看
- 系统日志位于"系统设置" -> "系统日志"
- 启动日志会在控制台显示

### 数据备份
- 定期使用"数据库维护"功能备份数据
- 备份文件保存在backup目录

## 📞 技术支持

如果遇到问题：
1. 查看控制台错误信息
2. 检查系统日志
3. 确认环境配置正确
4. 联系技术支持

## 🔄 更新说明

### v2.0 更新内容
- 重新设计界面，提升用户体验
- 完善授权码管理功能
- 增加数据统计和分析
- 优化数据库结构
- 添加uv环境支持
- 完善错误处理和日志记录