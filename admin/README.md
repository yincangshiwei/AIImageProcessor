# AI图像编辑平台 - 管理后台

基于Gradio构建的管理后台系统，用于管理授权码、积分调整、生成记录和案例库。

## 🚀 快速启动

### 初始化数据库（首次运行）
```bash
# 在项目根目录执行
cd ..
python init_db.py
```

### 安装依赖
```bash
pip install -r requirements.txt
```

### 启动服务
```bash
python app.py
```

访问地址：http://localhost:7860

## 📋 功能模块

### 1. 授权码管理
- ✅ 新增授权码
- ✅ 修改授权码信息
- ✅ 删除授权码
- ✅ 启用/禁用授权码
- ✅ 设置过期时间
- ✅ 积分调整

### 2. 积分调整记录
- 📊 查看所有积分调整历史
- 🔍 按授权码筛选记录
- 📅 按时间范围查询

### 3. 生成记录管理
- 📸 查看所有用户生成记录
- 🖼️ 预览上传的图片
- 📝 查看提示词和参数
- 🔄 区分拼图模式和多图模式

### 4. 案例库管理
- ➕ 新增案例
- ✏️ 编辑案例内容
- 🗑️ 删除案例
- 🏷️ 分类管理
- 🖼️ 案例图片管理

## ⚙️ 配置说明

### 数据库配置
在 `config.py` 中配置数据库路径：
```python
DATABASE_PATH = os.path.join(os.path.dirname(__file__), '..', 'app.db')
```

## 🗄️ 数据库表结构

管理后台使用以下数据库表：
- **auth_codes**: 授权码信息
- **credit_adjustments**: 积分调整记录
- **generation_records**: 图像生成记录
- **cases**: 案例库数据

## 🚨 注意事项

1. 确保数据库文件 `../app.db` 存在且可访问
2. 管理后台端口默认为7860，确保端口未被占用
3. 删除授权码前请确认该码未被用户使用
4. 积分调整会立即生效，请谨慎操作